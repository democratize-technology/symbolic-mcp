# Version Management System

Symbolic MCP uses a comprehensive version management system based on **semantic versioning** with automated version calculation from Git history.

## Overview

The version management system provides:

- **Semantic Versioning**: Automatic version calculation from Git tags
- **Version Synchronization**: Consistent version across all project files
- **FastMCP Compatibility**: Real-time compatibility checking and tracking
- **Automated Workflows**: GitHub Actions for version management
- **Development Tools**: CLI tools for version operations

## üè∑Ô∏è Semantic Versioning

### Format

Symbolic MCP follows [Semantic Versioning 2.0.0](https://semver.org/):

```
MAJOR.MINOR.PATCH[-PRERELEASE][+BUILD]
```

- **MAJOR**: Breaking changes (incompatible API changes)
- **MINOR**: New features (backwards compatible)
- **PATCH**: Bug fixes (backwards compatible)
- **PRERELEASE**: Pre-release versions (alpha, beta, rc)
- **BUILD**: Build metadata

### Examples

```
1.0.0          # First stable release
1.1.0          # New features
1.1.1          # Bug fixes
2.0.0-alpha.1  # Pre-release
2.0.0          # Breaking changes
```

## üîß Version Calculation

### Git Tag Based

Versions are automatically calculated from Git tags using setuptools-scm:

```bash
# Tags map to versions directly
v1.2.3    ‚Üí 1.2.3
v1.2.3-alpha.1 ‚Üí 1.2.3a1

# Development versions (commits since last tag)
3 commits since v1.2.3 ‚Üí 1.2.4.dev3
```

### Configuration

```toml
# pyproject.toml
[build-system]
requires = ["setuptools>=61.0", "wheel", "setuptools-scm>=8.0"]
build-backend = "setuptools.build_meta"

[project]
name = "symbolic-mcp"
dynamic = ["version"]  # Version is calculated by setuptools-scm

[tool.setuptools_scm]
write_to = "_version.py"
version_scheme = "release-branch-semver"
local_scheme = "node-and-date"
fallback_version = "0.1.0"
tag_regex = "^v(?P<version>[0-9]+\\.[0-9]+\\.[0-9]+(?:[a-zA-Z0-9-]*)?)$"
```

## üõ†Ô∏è Version Management Tools

### version_manager.py

Comprehensive CLI tool for version management:

```bash
# Get current version
python version_manager.py get

# Validate version format
python version_manager.py validate --version "1.2.3"

# Suggest next version based on commits
python version_manager.py suggest

# Bump version
python version_manager.py bump --bump-type minor
python version_manager.py bump  # Auto-detect from commits

# Set specific version
python version_manager.py set --version "1.2.3"

# Generate changelog
python version_manager.py changelog --output CHANGELOG.md

# Check FastMCP compatibility
python version_manager.py compatibility
```

### sync_version.py

Synchronize version across all project files:

```bash
# Sync version to all files
python scripts/sync_version.py --version "1.2.3"

# Skip documentation updates
python scripts/sync_version.py --version "1.2.3" --skip-docs

# Skip main.py updates
python scripts/sync_version.py --version "1.2.3" --skip-main
```

### check_fastmcp_compatibility.py

Check FastMCP 2.0 compatibility:

```bash
# Full compatibility report
python scripts/check_fastmcp_compatibility.py

# JSON output
python scripts/check_fastmcp_compatibility.py --json

# Quiet mode (for CI)
python scripts/check_fastmcp_compatibility.py --quiet

# Output to file
python scripts/check_fastmcp_compatibility.py --output compatibility.json
```

### setup_dev.py

Initialize development environment:

```bash
# Full development setup
python scripts/setup_dev.py
```

## üîÑ Version Synchronization

The system synchronizes version information across:

### 1. pyproject.toml
- Dynamic version configuration
- setuptools-scm settings

### 2. main.py
- `__version__` variable
- Project metadata
- FastMCP compatibility info

### 3. _version.py
- Auto-generated by setuptools-scm
- Version metadata
- Compatibility information

### 4. Documentation
- README.md installation instructions
- API documentation references
- Version-specific examples

## üöÄ Release Workflow

### Automated Release (GitHub Actions)

1. **Push to main**: Analyzes commits for version bump
2. **Version Calculation**: Determines next version
3. **Changelog Generation**: Creates release notes
4. **Version Sync**: Updates all files with new version
5. **Git Tag**: Creates version tag
6. **Build**: Creates distribution packages
7. **Testing**: Runs comprehensive test suite
8. **Publish**: Uploads to PyPI and Test PyPI
9. **Verification**: Post-release testing

### Manual Release

```bash
# 1. Bump version
python version_manager.py bump --bump-type minor

# 2. Sync files
python scripts/sync_version.py --version "1.1.0"

# 3. Commit changes
git add .
git commit -m "chore: bump version to 1.1.0"

# 4. Create tag
git tag -a "v1.1.0" -m "Release v1.1.0"

# 5. Push and trigger release
git push
git push origin v1.1.0
```

## üîó FastMCP Compatibility

### Version Requirements

- **Required**: FastMCP >= 2.0.0
- **Recommended**: Latest FastMCP 2.x release
- **Compatible**: All FastMCP 2.x versions

### Compatibility Checking

```bash
# Check current compatibility
python scripts/check_fastmcp_compatibility.py

# Output includes:
- FastMCP version
- Compatibility status
- Available APIs
- Missing functionality
- Recommendations
```

### Compatibility Reports

The compatibility checker provides detailed reports:

```json
{
  "version": "2.13.0",
  "compatibility": "compatible",
  "api_compatibility": {
    "core": { "Context": true, "Server": true },
    "decorators": { "mcp_tool": true, "with_tool": true }
  },
  "recommendations": ["‚úÖ FastMCP 2.0 compatibility confirmed"]
}
```

## üìã Development Workflows

### Branch Strategy

- **main**: Stable releases
- **develop**: Development work
- **feature/***: Feature branches
- **hotfix/***: Emergency fixes

### Commit Messages

Use conventional commits for automatic version detection:

```
feat: Add new symbolic execution feature
fix: Resolve memory leak in analysis engine
docs: Update API documentation
style: Fix code formatting
refactor: Optimize performance bottlenecks
test: Add integration test coverage
chore: Update dependencies
```

### Version Bump Rules

- **feat**: Bump minor version
- **fix**: Bump patch version
- **BREAKING CHANGE**: Bump major version
- **feat!**: Bump major version (breaking feature)
- **perf**: Bump minor version (performance improvement)

## üîç Version Validation

### Automated Checks

The system includes automated validation:

1. **Version Format**: Validates semantic version format
2. **Git Tags**: Ensures proper version tagging
3. **File Synchronization**: Verifies version consistency
4. **Compatibility**: Checks FastMCP compatibility
5. **Configuration**: Validates pyproject.toml settings

### GitHub Actions Workflows

- **version-management.yml**: Comprehensive version operations
- **semantic-release.yml**: Automated release process
- **ci-cd.yml**: Compatibility checking in CI/CD

## üõ°Ô∏è Security Considerations

### Version Spoofing Prevention

- Versions calculated from Git history
- Cryptographic hash verification
- Signed releases with GPG (future)

### Dependency Updates

- Automated security scanning
- Compatibility checking for updates
- Rollback procedures for issues

## üìä Version History

### Current Version

```bash
python version_manager.py get
# Output: 0.1.0
```

### Version History

See [CHANGELOG.md](CHANGELOG.md) for detailed version history.

### Compatibility Matrix

| Symbolic MCP | FastMCP | Python | Status |
|-------------|---------|--------|--------|
| 0.1.0+ | 2.0.0+ | 3.11+ | ‚úÖ Compatible |

## üîß Troubleshooting

### Common Issues

#### Version Not Updating
```bash
# Check setuptools-scm configuration
python -c "from setuptools_scm import get_version; print(get_version())"

# Force regeneration
rm -f _version.py
python -m build
```

#### Git Tag Issues
```bash
# Check existing tags
git tag --list

# Delete incorrect tag
git tag -d v1.2.3
git push origin :refs/tags/v1.2.3

# Create correct tag
git tag -a v1.2.3 -m "Release v1.2.3"
git push origin v1.2.3
```

#### Compatibility Issues
```bash
# Detailed compatibility check
python scripts/check_fastmcp_compatibility.py --json

# Update FastMCP
pip install --upgrade fastmcp
```

### Getting Help

- **GitHub Issues**: [symbolic-mcp/issues](https://github.com/democratize-technology/symbolic-mcp/issues)
- **Documentation**: [symbolic-mcp.readthedocs.io](https://symbolic-mcp.readthedocs.io/)
- **Discussions**: [symbolic-mcp/discussions](https://github.com/democratize-technology/symbolic-mcp/discussions)

## üöÄ Getting Started

### Quick Start

1. **Clone repository**
   ```bash
   git clone https://github.com/democratize-technology/symbolic-mcp.git
   cd symbolic-mcp
   ```

2. **Setup development environment**
   ```bash
   python scripts/setup_dev.py
   ```

3. **Check version management**
   ```bash
   python version_manager.py get
   python scripts/check_fastmcp_compatibility.py
   ```

4. **Make changes and commit**
   ```bash
   # Make your changes
   git add .
   git commit -m "feat: Add awesome new feature"
   ```

5. **Version bump and release**
   ```bash
   python version_manager.py bump
   python scripts/sync_version.py --version "$(python version_manager.py get)"
   git push  # Triggers automated release
   ```

## üìö Additional Resources

- [Semantic Versioning](https://semver.org/)
- [setuptools-scm Documentation](https://setuptools-scm.readthedocs.io/)
- [FastMCP Documentation](https://fastmcp.readthedocs.io/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [GitHub Actions](https://docs.github.com/en/actions)

---

**Note**: This version management system is designed for professional open source development with automated releases, comprehensive testing, and robust error handling.
